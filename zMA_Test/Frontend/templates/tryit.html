<html lang="en" >

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <style>
        * {
    margin:0;
    padding:0;
}
.pie {
    background-color:#ecc0b7;
    width:200px;
    height:200px;
    -moz-border-radius:100px;
    -webkit-border-radius:100px;
    border-radius:100px;
    position:relative;
}
.clip1 {
    position:absolute;
    top:0;
    left:0;
    width:200px;
    height:200px;
    clip:rect(0px, 200px, 200px, 100px);
}
.slice1 {
    position:absolute;
    width:200px;
    height:200px;
    clip:rect(0px, 100px, 200px, 0px);
    -moz-border-radius:100px;
    -webkit-border-radius:100px;
    border-radius:100px;
    background-color:#f7e5e1;
    border-color:#f7e5e1;
    -moz-transform:rotate(0);
    -webkit-transform:rotate(0);
    -o-transform:rotate(0);
    transform:rotate(0);
}
.clip2 {
    position:absolute;
    top:0;
    left:0;
    width:200px;
    height:200px;
    clip:rect(0, 100px, 200px, 0px);
}
.slice2 {
    position:absolute;
    width:200px;
    height:200px;
    clip:rect(0px, 200px, 200px, 100px);
    -moz-border-radius:100px;
    -webkit-border-radius:100px;
    border-radius:100px;
    background-color:#f7e5e1;
    border-color:#f7e5e1;
    -moz-transform:rotate(0);
    -webkit-transform:rotate(0);
    -o-transform:rotate(0);
    transform:rotate(0);
}
.status {
    position:absolute;
    height:30px;
    width:200px;
    line-height:60px;
    text-align:center;
    top:50%;
    margin-top:-35px;
    font-size:60px;
}
    </style>

    <style>


.myButton {
	background-color:#44c767;
	-moz-border-radius:28px;
	-webkit-border-radius:28px;
	border-radius:28px;
	border:1px solid #18ab29;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:17px;
	padding:16px 31px;
	text-decoration:none;
	text-shadow:0px 1px 0px #2f6627;
    margin: 5px;


}
.myButton:hover {
	background-color:#5cbf2a;
}
.myButton:active {


}
    </style>

    <style>
    @import url(https://fonts.googleapis.com/css?family=Oswald);

* {
  margin: 0px;
  padding: 0px;
  box-sizing: border-box;
}

html, body {
  background: #f0f0f0;
  border: 0px;
  width: 100%;
  height: 100%;
}
/*
html {
  padding: 50px;
  display: table;
}

body {
  display: inline-block;
  vertical-align: middle;
}
*/

article.flashcard {
  margin: 20px ;
  border: 1px rgba(255, 255, 255, 0.03) solid;
  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
  width: 100%;
  max-width: 600px;
  height: 100%;
  max-height: 400px;}

    /*
    input[type=checkbox] {
    display: none;
  }

  input[type=checkbox]:checked ~ label
    section.front {
      height: 0%;
    }

    section.back {
      height: 100%;
    }


  label {
    display: block;
    width: 100%;
    height: 100%;
  }
*/
  section {
    display: block;
    font: 30px 'Oswald', sans-serif;
    text-align: center;
    line-height: 400px;
    width: 100%;
    overflow: hidden;
  }

</style>
</head>

<!--

<button id="idk" style='visibility:hidden' onclick="myFunction(this, '{{ sessionID }}', 'idk','ik','flip')">I don't Know</button>
<button id="ik" style='visibility:hidden' onclick="myFunction(this, '{{ sessionID }}', 'idk','ik','flip')">I
    know
</button>
<button id="flip" style='visibility:visible' onclick="flipCard('{{ sessionID }}','flip','ik','idk')">Flip</button>

-->
<body>

<div style="display: inline-block">
    <div style="display: block" class="pie">
    <div class="clip1">
        <div class="slice1"></div>
    </div>
    <div class="clip2">
        <div class="slice2"></div>
    </div>
    <div class="status"></div>
</div>

<div style="display: block">
    <p >You have mastered <b id="master">0</b> out of 10 words</p>
    <p >You are reviewing <b id="review">0</b>out of 10 words</p>
    <p >You are learning <b id="learn">0</b>out of 10 words</p>

</div>
</div>



<article style="display: inline-block" class="flashcard">

  <label for="flashcard-1">
    <section  class="front" >
      <h3 ><b id="cardside1" >{{ word.word }}</b></h3>
    </section>

    <section id="cardside2" class="back" style="visibility: hidden" >
      {% include 'dictview.html' %}
    </section>
  </label>
</article>

<div style="display: inline-block">
<div style="display: block">
    <a href="#" class="myButton" id="idk"  style='visibility:hidden' onclick="myFunction(this, '{{ sessionID }}', 'idk','ik','flip')">I don't Know</a>
    </div>
    <div style="display: block">
         <a href="#" class="myButton" id="ik" style='visibility:hidden' onclick="myFunction(this, '{{ sessionID }}', 'idk','ik','flip')">I
    know</a>

    </div>
    <div style="display: block">
        <a href="#" class="myButton" id="flip" style='visibility:visible' onclick="flipCard('{{ sessionID }}','flip','ik','idk')">Flip</a>

    </div>
</div>





<script>

function rotate(element, degree) {
    element.css({
        '-webkit-transform': 'rotate(' + degree + 'deg)',
            '-moz-transform': 'rotate(' + degree + 'deg)',
            '-ms-transform': 'rotate(' + degree + 'deg)',
            '-o-transform': 'rotate(' + degree + 'deg)',
            'transform': 'rotate(' + degree + 'deg)',
            'zoom': 1
    });
}

function progressBarUpdate(x, outOf) {
    var firstHalfAngle = 180;
    var secondHalfAngle = 0;

    // caluclate the angle
    var drawAngle = x / outOf * 360;

    // calculate the angle to be displayed if each half
    if (drawAngle <= 180) {
        firstHalfAngle = drawAngle;
    } else {
        secondHalfAngle = drawAngle - 180;
    }

    // set the transition
    rotate($(".slice1"), firstHalfAngle);
    rotate($(".slice2"), secondHalfAngle);

    // set the values on the text
    $(".status").html(x + " of " + outOf);
}

    function myFunction(source, sessionID, id2hide, id3hide, id2show) {
        var m=3;

        $.ajax({
                url: '/nextword',
                data: {'sessionID':sessionID, 'buttonID':source.id},
                dataType: 'json',
                type: 'POST',
                success: function (response) {
                    document.getElementById("master").innerHTML = response.mastered;
                    document.getElementById("review").innerHTML = response.reviewing;
                    document.getElementById("learn").innerHTML = response.learning;

                    m = response.mastered;
                    progressBarUpdate(m,10);

                    /*r = ((response.reviewing)*100)/(response.mastered+response.reviewing+response.learning);
                    l = ((response.learning)*100)/(response.mastered+response.reviewing+response.learning);
                    chart(m,r,l)
                    */
                    if(response.word['wordID']==='$null$')
                    {

                        document.getElementById("cardside1").innerHTML='Congratulations!You have learned everything';
                        document.getElementById("cardside2").style.visibility = 'hidden';
                        document.getElementById("cardside1").style.visibility = 'visible';
                        document.getElementById(id2hide).style.visibility = 'hidden'
                        document.getElementById(id3hide).style.visibility = 'hidden';
                        document.getElementById(id2show).style.visibility = 'hidden';
                    }
                    else
                    {
                        document.getElementById("cardside2").style.visibility = 'hidden';
                        document.getElementById("cardside1").style.visibility = 'visible';
                        document.getElementById("cardside1").innerHTML=response.word['word']

                        document.getElementById(id2hide).style.visibility = 'hidden'
                        document.getElementById(id3hide).style.visibility = 'hidden';
                        document.getElementById(id2show).style.visibility = 'visible';
                    }

                    console.log("nextword ",response.word, response.word['word']);

                },
                error: function (error) {
                    console.log('bal');
                }
            });


    }

    function flipCard(sessionID,id2hide, id2show, id3show) {
        //console.log('func e dhukse', sessionID);
        //document.getElementById("demo").innerHTML = word[1];
        $.ajax({
                url: '/fliped',
                data: {'sessionID':sessionID},
                dataType: 'json',
                type: 'POST',
                success: function (response) {

                    if(response.word['wordID']==='$null$')
                    {
                        document.getElementById("cardside1").innerHTML='Congratulations!You have learned everything';
                        document.getElementById("cardside2").style.visibility = 'hidden';
                        document.getElementById("cardside1").style.visibility = 'visible';
                        document.getElementById(id2hide).style.visibility = 'hidden'
                        document.getElementById(id3hide).style.visibility = 'hidden';
                        document.getElementById(id2show).style.visibility = 'hidden';
                    }
                    else
                    {
                        document.getElementById("cardside2").style.visibility = 'visible';
                        document.getElementById("cardside1").style.visibility = 'hidden';

                        var audio = document.getElementById("audio");
                        audio.src = "/words/audio/"+response.word['word']+".mp3";
                        audio.load(); //call this to just preload the audio without playing
                        //audio.play(); //call this to play the song right away

                        document.getElementById("selectlan").onchange = function() {translation(response.word['translations'])};

                        document.getElementById("word").innerHTML=response.word['word'];
                        document.getElementById("type").innerHTML= response.word['TYPE'];
                        document.getElementById("meaning").innerHTML= response.word['meaning'];
                        document.getElementById("usage").innerHTML= response.word['usage'];

                        document.getElementById(id2hide).style.visibility = 'hidden';
                        document.getElementById(id2show).style.visibility = 'visible';
                        document.getElementById(id3show).style.visibility = 'visible';
                    }

                    console.log("flipped ", response.word, response.word['word']);
                },
                error: function (error) {
                    console.log('bal');
                }
            });
    }
    function translation(meaning) {
        var e = document.getElementById("selectlan");
        var value = e.options[e.selectedIndex].value;
        var text = e.options[e.selectedIndex].text;
        console.log(value);
        console.log(text);
        console.log(meaning);

        document.getElementById("trans").innerHTML = meaning[text];

    }

</script>

</body>
</html>>